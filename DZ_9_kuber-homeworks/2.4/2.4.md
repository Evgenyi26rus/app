# Домашнее задание к занятию «Управление доступом»### Цель заданияВ тестовой среде Kubernetes нужно предоставить ограниченный доступ пользователю.------### Чеклист готовности к домашнему заданию1. Установлено k8s-решение, например MicroK8S.2. Установленный локальный kubectl.3. Редактор YAML-файлов с подключённым github-репозиторием.------### Инструменты / дополнительные материалы, которые пригодятся для выполнения задания1. [Описание](https://kubernetes.io/docs/reference/access-authn-authz/rbac/) RBAC.2. [Пользователи и авторизация RBAC в Kubernetes](https://habr.com/ru/company/flant/blog/470503/).3. [RBAC with Kubernetes in Minikube](https://medium.com/@HoussemDellai/rbac-with-kubernetes-in-minikube-4deed658ea7b).------### Задание 1. Создайте конфигурацию для подключения пользователя1. Создайте и подпишите SSL-сертификат для подключения к кластеру.[test.csr](test.csr)[test.crt](test.crt)[test.key](test.key)![9.9.1.1.1.png](picture%2F9.9.1.1.1.png)2. Настройте конфигурационный файл kubectl для подключения.![9.9.1.2.png](picture%2F9.9.1.2.png)```commandlinekorshunovi@korshunovi:~/PycharmProjects/netology_devops-34_KorshunovE/DZ_9_kuber-homeworks/2.4$ microk8s config apiVersion: v1clusters:- cluster:    certificate-authority-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUREekNDQWZlZ0F3SUJBZ0lVSStlZEtqR0hKblNKWlZiOVhUcWZLUEVhWThrd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0Z6RVZNQk1HQTFVRUF3d01NVEF1TVRVeUxqRTRNeTR4TUI0WERUSTBNRGN5TURFeE1USXlNRm9YRFRNMApNRGN4T0RFeE1USXlNRm93RnpFVk1CTUdBMVVFQXd3TU1UQXVNVFV5TGpFNE15NHhNSUlCSWpBTkJna3Foa2lHCjl3MEJBUUVGQUFPQ0FROEFNSUlCQ2dLQ0FRRUFrMTY0RTZHbFZ3WkdpZlhNUUhjNk1PSkZ1YXA3anBIRnJVQ2oKZzZYcGtNV1hqVUdiRnFwT1l0dU1yUng4M21QSEttWVA5bXJDNHBMektCYnhHdnNVM1JvSmZSZ3h2cTI3b3V6YQpKSytaUkt6ek5lenN3UTJ2Sk9FV1czUEQxeStXQnNoaER3YXJ1bndCelRpR0ZtNHhYeE5LT2plRzJRdEZRWURTCldjYlI1aWVmNWpZdW52UjJ0TXZVdkdJc2hYcFBsanQwUEk3enJxV29FdmhiMlZCUnpOYjJLcXdqZ09MRVlWQ2kKbFZvdGtDSE5QbmQxVHQzQUVlVlhCaERGQU52MHI4amlnVGJPdzUrMkRkTTBBdFBWcVY0MDBadWttNjlpeERJeQpUQmlWaVBwNlZmaVZuRHBqQ1BYeUlPQVlQM3BCbVdneHRzNE5qUkNkQUt4bm5SKzNjUUlEQVFBQm8xTXdVVEFkCkJnTlZIUTRFRmdRVUpQSG12RFZlNTFrcHZjaHlSb3dRU0Q1QWE4OHdId1lEVlIwakJCZ3dGb0FVSlBIbXZEVmUKNTFrcHZjaHlSb3dRU0Q1QWE4OHdEd1lEVlIwVEFRSC9CQVV3QXdFQi96QU5CZ2txaGtpRzl3MEJBUXNGQUFPQwpBUUVBUUVnY00rb1dmVkJ5WHhsSEtTRXY4OVJLZ2REM0pNSHl1REkzWVRtOGVPSUltMWs3czh0V0l0ZlMrWVdTCm1zaThJQWJxT1M4ZWR3RHFTckNyRGprZGRYeEQrcW1wTWUyQ0FONlFialJiWHE0VWR3M0tPSUIvd2xHTkVmTjIKdEJxcDJld0tTRGpZSXk1QUJoa1grc0lZMng0ZjNtU2RWa2dScTQyYldQb0tYUERTVEZ2cHpzbHdnZFZSY3Z0NgpsUGgwOHNTbWhEYnZ4T0xUaFFMVlFTWWM3Z1BnMVJNd0pZd044SU1rYzd4bDREaVVLVnRhQmlKRDFTcW56ek9vCjZXdHFTSUZTUEQ0MFluOXRmS1BnYTJkbE1DTzI1WFdlQzN5bXF6RzNaYUZvZlVEOFhxV2doeWIvMmZyZm5ucFgKeXpvanhNTUhaZHVrNXo4aFFyR1U1ek9QZnc9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==    server: https://192.168.1.117:16443  name: microk8s-clustercontexts:- context:    cluster: microk8s-cluster    user: admin  name: microk8s- context:    cluster: microk8s-cluster    user: netology2  name: netology2current-context: microk8skind: Configpreferences: {}users:- name: admin  user:    client-certificate-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUN6RENDQWJTZ0F3SUJBZ0lVT3ZrZURzODV3Sno1bmt0dFZXaHZkck9BMXhZd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0Z6RVZNQk1HQTFVRUF3d01NVEF1TVRVeUxqRTRNeTR4TUI0WERUSTBNRGN5TURFeE1USXlNVm9YRFRNMApNRGN4T0RFeE1USXlNVm93S1RFT01Bd0dBMVVFQXd3RllXUnRhVzR4RnpBVkJnTlZCQW9NRG5ONWMzUmxiVHB0CllYTjBaWEp6TUlJQklqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQ0FROEFNSUlCQ2dLQ0FRRUEwWDN4azBVRGd4RzkKYng3enY5UkFDdkI2dVAwWXBlQWhsOXlXbzA2V1Zzd1grS3F3dnRYUTR4SkNreTlGSUhYZXpIMGFCMzZoV0tNZQo2TkMrVXIwY01aNnBkdThJMEpyRWJwR1Bta2pYanB3aFpsb2gxeUR6c2gwckFsQkc1ckYzMmtLYjJsdEhLRkRMCko2MlFsa1RMQ0FGNnBQTVE4bVdsd0JUUHJRZmxrS1lPYlhLZ2czU2RQYjlXREdsSCtkT1l2RUxvTjhBdEc1YlEKL0tsR0pNMjByaEFpb0FvVXAzNHZXUmpHeWczQlVsOW9JSmduL25lN3YvUElESDNub1JzdzNvc2JTa3RxUktHMwpGUVlqQU9LcTVTZ21JbVR4VW4yQ0dEQUtUM3gvbEZuSnl0d2JPQ1h1b3pCakhVaFZDWVZkR3FnN09ZQ2VrdG1UCllETll2OXdiY1FJREFRQUJNQTBHQ1NxR1NJYjNEUUVCQ3dVQUE0SUJBUUFSZkMwbVYvdFdkYnhDT2lXUjZyWUoKbUhJR3hqYjJROExsak5LWHNveU9xZUJ5QzZJT2l6cDRUMkNabFdHRzBUWXZPa0FSaFQ5SzNsdFZmQU5TTEdwagpNdXhmdlpJckc5OCtZQzdockNsQ1RGTk95UGphNXN3VGc4Nm40L09pVGxpTWxDV1YyYnV3UndIV3c5WW5WV3FGCitlZXpuN29FK290MHkrODVUL3JTTDBsb3Zwcm1xcXZhVVJIUGJ2VGJzT2RKMHVmbWo2ZjRPMk1PN0JzSmFUZnEKYmZyRU9CbUhJVmY5MHhYNXhVV01nbmlmQ0E4aDZDZ05kVDc3RHczejJQakYvMWovTHpVaElVaUU1K0tkZitnYgo0cEVvbjlON1Z6djJBeVJtNCt6U3FidW9Ga1JidCsveGZQeDM1N1NyV3RFazJkWHRrQStLQnlBaUMzcVlrNk1aCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K    client-key-data: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBMFgzeGswVURneEc5Yng3enY5UkFDdkI2dVAwWXBlQWhsOXlXbzA2V1Zzd1grS3F3CnZ0WFE0eEpDa3k5RklIWGV6SDBhQjM2aFdLTWU2TkMrVXIwY01aNnBkdThJMEpyRWJwR1Bta2pYanB3aFpsb2gKMXlEenNoMHJBbEJHNXJGMzJrS2IybHRIS0ZETEo2MlFsa1RMQ0FGNnBQTVE4bVdsd0JUUHJRZmxrS1lPYlhLZwpnM1NkUGI5V0RHbEgrZE9ZdkVMb044QXRHNWJRL0tsR0pNMjByaEFpb0FvVXAzNHZXUmpHeWczQlVsOW9JSmduCi9uZTd2L1BJREgzbm9Sc3czb3NiU2t0cVJLRzNGUVlqQU9LcTVTZ21JbVR4VW4yQ0dEQUtUM3gvbEZuSnl0d2IKT0NYdW96QmpIVWhWQ1lWZEdxZzdPWUNla3RtVFlETll2OXdiY1FJREFRQUJBb0lCQVFETkJzSERMQ3YvdndEegpIQXZhbGxRSFlNdjYrRm1ESGhSQ21EVWxwdWdrRXFMelQ3cWpTb2VoZEdHTHd4dVlaVU9rUmx1UE1qT2VtQ2JNCkhGL29nZ1J4MjZKbk1CSWtkeFFBVXAyRWxmM0JLTFRYZ3liVGNRQ1FOVk8rYytxd0pNZno2SFM0QTlWa2M0NGcKU3hIU3Y0a2xVSzFEZWsvL3E5UElaWlhLOW91S1AvTXBkdzNldDd4QjVFTlFzdXM4NHNkeTNNb0gySnpINTdvTApVaU1wWFJJb2VuOE9vbmNRRHNGYWtvMytKVmJXU1Fqbkd6ckVoZzFKeXMxcFIzVGJZTStSSWNZZTRrL2tzR2FsCndUeWJ0WnZLRTNKY29yOWRZOEhOd1NvcmFlNjl3VkJwN0pSNkQ1Q2V0V0QxUHV3aEYxdm9uMFNTK0FlS0xrcFoKRU1uekdqeXhBb0dCQVArQ0RLbXVHamNoQVBOSzJOc29IaWdFbHlNYTBKNGYvOXdjVTFsUDRLK2F1N3QzZWY3awpDcE9PYTFCUTk0TGE1Q05Fdk5ZVmdYa2JQNXozckNqR2R1ZFJVMUdnRmwvenQ2OTB6N0MrNTBTM2NJMURmb2tZCkxsbU41STNscGFCUTVvbERDL21ZRzR6dW9MSlBQZUdmblJsTFA2UWkyMnBPM3hhQkZldGVhTzQvQW9HQkFOSGwKTmdIOFpiVE1NcU45bTUzcG5jdHd3TTd4NmxISlhJeHJyWmh0SnVVbnR1aktWTFJCTTRUa2VqNmJ2KzdSaG1wMAp2TjM0L05TcEhCcW5KdGpKTjVudGsrakRJSCtGQ2ZxQ2lMaU1WcWhTdWk2RzZYMEhtNDN4d0srWVhIV1RiMTBvCnNHcEZqT0t0bDdEREwxOWdvalRGYXU2cDkva2JLaGZ4WWVmSkMrcFBBb0dCQU9oUGt6blh6WWdnWHQvV1JyT0UKbDE2bFJkR3FPTkg4b0VLK0VsNWJEUnc4NE1JRFVJMmJRNjZEeURpL1ZUdkp6N0h0ZHBCai8xTmduZ2NXL1pZWgpWTlRmRVpWZXE5bFVHOGZRdW1HbVFWb3VPNHlGT0pCbnh3U3Z5WVhtcmgvRVRzZXdpVHZIdkF6NGptMXhOUDltCmc0MFM2T3RRc2hUSFgzanpwejFZbXFrN0FvR0FSQjVFTWM3TTN5a3FBZjhnd3RYdmZQZkJ5eWVkcVI5Vlpza0gKVktHUDd1eTlvcjBQVWxTYXVMVkJxeEgyN3pXV2p2UUYyM0FUOVp4UVg2SUJySGRaRVI2V1V3TUloL29RSy9tegpEMW1VUWhwZkMveUN5QzN3NE5jbGRwZFc0bDJQMWNiL3dlMkNkSXByNFZUbkNlZ2RuRXk1a0cwZTZmeFQ0K05WCnA5aUtnbWNDZ1lBWkZSWnZ0WGZnZmlhSmNLUzNSNHdqVXNhOTlHM3ZEc2QvbGNRaWdXR3ZKTzlqWnk0azhBeSsKU1g1M054azJ5Q3huSS9IQ1NKQTVwWStkQ20vN255Z2ZpY3poUnRObnVoc2JHWWc4aGFvN3EvdkZCNlVqNVdYTQp5b3JiZzM1bWxJbjJ3b2x6VEliUng3amFDOGNCYURzeHh6TlhhZnExMmQrZDk2SkdkU1pBRkE9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo=- name: netology2  user:    client-certificate: /home/korshunovi/PycharmProjects/netology_devops-34_KorshunovE/DZ_9_kuber-homeworks/2.4/test.crt    client-key: /home/korshunovi/PycharmProjects/netology_devops-34_KorshunovE/DZ_9_kuber-homeworks/2.4/test.key```3. Создайте роли и все необходимые настройки для пользователя.[role.yaml](src%2Frole.yaml)[rolebinding.yaml](src%2Frolebinding.yaml)![9.9.1.3.png](picture%2F9.9.1.3.png)4. Предусмотрите права пользователя. Пользователь может просматривать логи подов и их конфигурацию (`kubectl logs pod <pod_id>`, `kubectl describe pod <pod_id>`).![9.9.1.5.1.png](picture%2F9.9.1.5.1.png)![9.9.1.5.2.png](picture%2F9.9.1.5.2.png)5. Предоставьте манифесты и скриншоты и/или вывод необходимых команд.------### Правила приёма работы1. Домашняя работа оформляется в своём Git-репозитории в файле README.md. Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.2. Файл README.md должен содержать скриншоты вывода необходимых команд `kubectl`, скриншоты результатов.3. Репозиторий должен содержать тексты манифестов или ссылки на них в файле README.md.------